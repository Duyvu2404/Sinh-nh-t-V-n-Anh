<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy birthday</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <audio id="audioPlayer" autoplay>
      <source src="song1.mp3" type="audio/mpeg">
      Your browser isn't invited for super fun audio time.
      <source src="song2.mp3" type="audio/mpeg">
      Your browser isn't invited for super fun audio time.
      <source src="song3.mp3"></source>
      Your browser isn't invited for super fun audio time.
    </audio>
  </head>
  <body>
    <div id="wrapper">
      <div class="flag__birthday">
        <img src="./images/1.png" alt="" width="350" class="flag__left" />
        <img src="./images/1.png" alt="" width="350" class="flag__right" />
      </div>
      <div class="content">
        <div class="left">
          <div class="title">
            <h1 class="happy">
              <span style="--t: 4s">H</span>
              <span style="--t: 4.2s">a</span>
              <span style="--t: 4.4s">p</span>
              <span style="--t: 4.6s">p</span>
              <span style="--t: 4.8s">
                y
                <div class="hat">
                  <img src="./images/hat.png" alt="" width="130" />
                </div>
              </span>
            </h1>
            <h1 class="birthday">
              <span style="--t: 5s">B</span>
              <span style="--t: 5.2s">i</span>
              <span style="--t: 5.4s">r</span>
              <span style="--t: 5.6s">t</span>
              <span style="--t: 5.8s">h</span>
              <span style="--t: 6s">d</span>
              <span style="--t: 6.2s">a</span>
              <span style="--t: 6.4s">y</span>
            </h1>
          </div>
          <div class="date__of__birth">
            <span></span>
          </div>
          <div class="btn">
            <button id="btn__letter">
              M√≥n qu√† b√≠ m·∫≠t üíï
              <i class="fa-regular fa-envelope"></i>
            </button>
          </div>
          <div class="btn">
            <button id="btn__gift">
              G·ª≠i l·ªùi t√¢m s·ª±
              <i class="fas fa-spinner"></i> <!-- Hi·ªáu ·ª©ng quay -->
            </button>
          </div>
        </div>
        <div class="right">
          <div class="box__account">
            <div class="image">
              <img
                src="./images/va.jpg"
                alt=""
                style="
                  border-radius: 200%;
                  width: 100%;
                  height: 100%;
                  object-fit: cover;
                  object-position: center;
                  object-position: 20% 80%;
                "
                class="rounded-image"
              />
            </div>
            <div class="name">
              <i class="fa-solid fa-heart"></i>
              <span>ƒê·∫∂NG V√ï VƒÇN ANH</span>
              <i class="fa-solid fa-heart"></i>
            </div>
            <div class="balloon_one">
              <img width="100px" src="./images/balloon1.png" alt="" />
            </div>
            <div class="balloon_two">
              <img width="100px" src="./images/balloon2.png" alt="" />
            </div>
          </div>
          <div class="cricle">
            <div class="text__cricle">
              <span style="--i: 1">h</span>
              <span style="--i: 2">a</span>
              <span style="--i: 3">p</span>
              <span style="--i: 4">p</span>
              <span style="--i: 5">y</span>
              <span style="--i: 6">-</span>
              <span style="--i: 7">b</span>
              <span style="--i: 8">i</span>
              <span style="--i: 9">r</span>
              <span style="--i: 10">t</span>
              <span style="--i: 11">h</span>
              <span style="--i: 12">d</span>
              <span style="--i: 13">a</span>
              <span style="--i: 14">y</span>
              <span style="--i: 15">-</span>
            </div>
            <i class="fa-solid fa-heart"></i>
          </div>
          <span class="day"></span>
          <span class="month"></span>
        </div>
      </div>
      <div class="decorate_star star1" style="--t: 15s"></div>
      <div class="decorate_star star2" style="--t: 15.2s"></div>
      <div class="decorate_star star3" style="--t: 15.4s"></div>
      <div class="decorate_star star4" style="--t: 15.6s"></div>
      <div class="decorate_star star5" style="--t: 15.8s"></div>
      <div class="decorate_flower--one" style="--t: 15s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--two" style="--t: 15.3s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_flower--three" style="--t: 15.6s">
        <img width="20" src="./images/decorate_flower.png" alt="" />
      </div>
      <div class="decorate_bottom">
        <img src="./images/decorate.png" alt="" width="100" />
      </div>
      <div class="smiley__icon">
        <img src="./images/smiley_icon.png" alt="" width="100" />
      </div>

      <div class="box__letter">
        <div class="letter__border">
          <div class="letter">
            <div class="title__letter"></div>
            <div class="content__letter">
              <div class="left">
                <img
                  id="heart__letter"
                  src="./images/heart_letter.png"
                  alt=""
                />
                <img
                  class="heart heart_1"
                  style="--t: 0.2s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_2"
                  style="--t: 0.4s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_3"
                  style="--t: 0.6s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
                <img
                  class="heart heart_4"
                  style="--t: 0.8s"
                  width="20"
                  src="./images/heart.png"
                  alt=""
                />
              </div>
              <div class="right">
                <div class="love__img">
                  <img src="./images/love.png" alt="" width="220" />
                </div>
                <div class="text__letter">
                  <p></p>
                </div>
                <img id="mewmew" width="80" src="./images/mewmew.gif" alt="" />
              </div>
            </div>
          </div>
          <div class="close">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    let datetxt = "01-01-2009";
    let datatxtletter =
      "Ch√∫c m·ª´ng sinh nh·∫≠t c·∫≠u, ch√∫c c·∫≠u tu·ªïi 16 th·∫≠t r·ª±c r·ª° v√† tr√†n ƒë·∫ßy nh·ªØng ƒëi·ªÅu t·ªët ƒë·∫πp nh·∫•t! ƒê·ªô tu·ªïi n√†y l√† m·ªôt c·ªôt m·ªëc tuy·ªát v·ªùi ‚Äì ƒë·ªß tr∆∞·ªüng th√†nh ƒë·ªÉ v∆∞·ª£t qua nh·ªØng th·ª≠ th√°ch kh√≥ khƒÉn, nh∆∞ng v·∫´n gi·ªØ ƒë∆∞·ª£c nh·ªØng ∆∞·ªõc m∆° trong tr·∫ªo nh·∫•t. T·ªõ bi·∫øt, c√≥ l·∫Ω m√≥n qu√† n√†y ƒë·∫øn mu·ªôn, nh∆∞ng t·ªõ tin r·∫±ng nh·ªØng l·ªùi t·ªõ vi·∫øt ra l√∫c n√†y v·∫´n s·∫Ω gi·ªØ nguy√™n gi√° tr·ªã. " +
      "B·ªüi ƒëi·ªÅu quan tr·ªçng nh·∫•t kh√¥ng ph·∫£i l√† s·ªõm hay mu·ªôn, m√† l√† t·∫•m l√≤ng t·ªõ mu·ªën g·ª≠i ƒë·∫øn c·∫≠u. C·∫≠u c√≥ bi·∫øt kh√¥ng? Trong m·∫Øt t·ªõ, c·∫≠u lu√¥n l√† m·ªôt ng∆∞·ªùi th·∫≠t ƒë·∫∑c bi·ªát ‚Äì tr∆∞·ªüng th√†nh, ki√™n ƒë·ªãnh nh∆∞ng c≈©ng kh√¥ng k√©m ph·∫ßn ·∫•m √°p. D√π cu·ªôc s·ªëng c√≥ ƒë∆∞a ƒë·∫©y ch√∫ng ta theo nh·ªØng h∆∞·ªõng kh√°c nhau, d√π c√≥ th·ªÉ ba th√°ng n·ªØa ch√∫ng ta s·∫Ω ph·∫£i t·∫°m xa nhau, nh∆∞ng t·ªõ v·∫´n hy v·ªçng r·∫±ng, d√π ·ªü ƒë√¢u, c·∫≠u c≈©ng s·∫Ω lu√¥n vui v·∫ª v√† h·∫°nh ph√∫c... " +
      "T·ªõ kh√¥ng bi·∫øt t∆∞∆°ng lai s·∫Ω ra sao, nh∆∞ng t·ªõ mong r·∫±ng gi·ªØa ch√∫ng ta s·∫Ω kh√¥ng ch·ªâ l√† m·ªôt ƒëo·∫°n ƒë∆∞·ªùng ng·∫Øn ng·ªßi, m√† l√† m·ªôt t√¨nh b·∫°n d√†i l√¢u, m·ªôt ng∆∞·ªùi tri k·ª∑ c√≥ th·ªÉ th·∫•u hi·ªÉu v√† ƒë·ªìng h√†nh, d√π cho c√≥ kho·∫£ng c√°ch hay th·ª≠ th√°ch n√†o ƒëi n·ªØa. H√£y s·ªëng th·∫≠t h·∫°nh ph√∫c, Ma K·∫øt sinh ng√†y ƒë·∫ßu nƒÉm ‚Äì m·∫°nh m·∫Ω, b·∫£n lƒ©nh, nh∆∞ng c≈©ng ƒë·ª´ng qu√™n gi·ªØ cho m√¨nh nh·ªØng ph√∫t gi√¢y nh·∫π nh√†ng v√† h·∫°nh ph√∫c. Ch√∫c c·∫≠u tu·ªïi 16 tr·ªçn v·∫πn nh·∫•t! üí´ M√£i l√† tri k·ª∑, c√πng nhau vi·∫øt ti·∫øp nh·ªØng ƒëi·ªÅu di·ªáu k·ª≥! ‚ú®üíñ";
    let titleLetter = "Dear my BEST friend ";
    let charArrDate = datetxt.split("");
    let charArrTitle = titleLetter.split("");
    let textSegments = datatxtletter.match(/(.{1,320})(?:\s|$)/g);

    let currentIndex = 0;
    let currentIndexTitle = 0;
    let currentSegment = 0;

    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");

    setTimeout(function () {
      let timeDatetxt = setInterval(function () {
        if (currentIndex < charArrDate.length) {
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        } else {
          let i = document.createElement("i");
          i.className = "fa-solid fa-star";
          document.querySelector(".date__of__birth").prepend(i);
          document.querySelector(".date__of__birth").appendChild(i.cloneNode(true));
          clearInterval(timeDatetxt);
        }
      }, 100);
    }, 12000);

    var intervalTitle, intervalContent;

    $("#btn__letter").on("click", function () {
      $(".box__letter").slideDown();
      setTimeout(function () {
        $(".letter__border").slideDown();
      }, 1000);

      setTimeout(function () {
        intervalTitle = setInterval(function () {
          if (currentIndexTitle < charArrTitle.length) {
            document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
            let i = document.createElement("i");
            i.className = "fa-solid fa-heart";
            document.querySelector(".title__letter").appendChild(i);
            currentIndexTitle++;
          } else {
            clearInterval(intervalTitle);
          }
        }, 100);
      }, 2000);

      setTimeout(function () {
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      }, 2800);

      setTimeout(function () {
        document.querySelectorAll(".heart").forEach((item) => {
          item.classList.add("animation");
        });
      }, 3500);

      function displaySegment() {
        if (currentSegment < textSegments.length) {
          text__letter.textContent = "";
          let textArr = textSegments[currentSegment].split("");
          let currentIndexLetter = 0;

          intervalContent = setInterval(function () {
            if (currentIndexLetter < textArr.length) {
              text__letter.textContent += textArr[currentIndexLetter];
              currentIndexLetter++;
            } else {
              clearInterval(intervalContent);

              // Th√™m "‚Äì>" v√†o ƒëo·∫°n 1 & 2, nh∆∞ng kh√¥ng th√™m v√†o ƒëo·∫°n 3
              if (currentSegment < textSegments.length - 1) {
                setTimeout(() => {
                  text__letter.textContent += " -->";

                  setTimeout(() => {
                    currentSegment++;
                    if (currentSegment < textSegments.length) {
                      displaySegment();
                    } else {
                      currentSegment = 0;
                      displaySegment();
                    }
                  }, 5000);
                }, 500);
              }
            }
          }, 50);
        }
      }

      setTimeout(displaySegment, 6000);
    });

    $(".close").on("click", function () {
      clearInterval(intervalContent);
      document.querySelector(".title__letter").textContent = "";
      text__letter.textContent = "";
      currentIndexTitle = 0;
      currentSegment = 0;
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item) => {
        item.classList.remove("animation");
      });
      $(".box__letter").slideUp();
      $(".letter__border").slideUp();
    });
    //mobile

    function mobile() {
      const app = {
        timeout: function (txt, dom) {
          let currentIndex = 0;
          let charArr = txt.split("");
          intervalMobile = setInterval(function () {
            if (currentIndex < charArr.length) {
              dom.textContent += charArr[currentIndex];
              currentIndex++;
            } else {
              clearInterval(intervalMobile);
            }
          }, 200);
        },
      };
      return app;
    }
    const fcMobile = mobile();
    if (window.innerWidth < 768) {
      setTimeout(() => {
        fcMobile.timeout("26", document.querySelector(".day"));
      }, 5000);
      setTimeout(() => {
        fcMobile.timeout("10", document.querySelector(".month"));
      }, 6000);
    }
    
    document.getElementById("btn__gift").addEventListener("click", function() {
    window.open("https://tinyurl.com/goc-chia-se", "_blank");
    });

    const playlist = [
    "song1.mp3",
    "song2.mp3",
    "song3.mp3"
  ];

  let currentTrack = 0; // Ch·ªâ s·ªë b√†i h√°t hi·ªán t·∫°i
  const audioPlayer = document.getElementById("audioPlayer");

  // Khi nh·∫°c k·∫øt th√∫c, chuy·ªÉn sang b√†i ti·∫øp theo
  audioPlayer.addEventListener("ended", function() {
    currentTrack = (currentTrack + 1) % playlist.length; // L·∫∑p l·∫°i playlist
    audioPlayer.src = playlist[currentTrack]; // ƒê·ªïi ngu·ªìn file nh·∫°c
    audioPlayer.play(); // T·ª± ƒë·ªông ph√°t b√†i ti·∫øp theo
  });
  </script>
</html>
